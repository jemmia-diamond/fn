// Facebook Ads Campaign data
model FacebookAdsCampaign {
  uuid                             String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  id                               String    @unique
  account_id                       String
  name                             String
  objective                        String?
  status                           String?
  bid_strategy                     String?
  buying_type                      String?
  budget_remaining                 String?
  budget_rebalance_flag            Boolean   @default(false)
  lifetime_budget                  String?
  spend_cap                        String?
  last_budget_toggling_time        DateTime?
  pacing_type                      Json?     @db.JsonB
  is_budget_schedule_enabled       Boolean   @default(false)
  campaign_group_active_time       String?
  start_time                       DateTime?
  stop_time                        DateTime?
  is_message_campaign              Boolean   @default(false)
  is_direct_send_campaign          Boolean   @default(false)
  is_ska                           Boolean?
  special_ad_category              String?
  special_ad_category_country      Json?     @db.JsonB
  adlabels                         Json?     @db.JsonB
  source_campaign                  Json?     @db.JsonB
  source_campaign_id               String?
  topline_id                       String?
  issues_info                      Json?     @db.JsonB
  brand_lift_studies               Json?     @db.JsonB
  created_time                     DateTime?
  updated_time                     DateTime?
  synced_at                        DateTime  @default(now())
  updated_at                       DateTime  @default(now()) @updatedAt

  @@map("facebook_ads_campaigns")
  @@schema("marketing")
}

// Facebook Ads Ad Set data
model FacebookAdsAdSet {
  uuid                             String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  id                               String    @unique
  campaign_id                      String
  account_id                       String
  name                             String
  status                           String?   // ACTIVE, PAUSED, DELETED, ARCHIVED
  configured_status                String?
  effective_status                 String?   // ACTIVE, PAUSED, CAMPAIGN_PAUSED, WITH_ISSUES, etc.
  daily_budget                     String?
  lifetime_budget                  String?
  budget_remaining                 String?
  daily_min_spend_target           String?
  daily_spend_cap                  String?
  lifetime_min_spend_target        String?
  lifetime_spend_cap               String?
  bid_amount                       String?
  bid_strategy                     String?   // LOWEST_COST_WITHOUT_CAP, LOWEST_COST_WITH_BID_CAP, COST_CAP
  bid_constraints                  Json?     @db.JsonB
  bid_info                         Json?     @db.JsonB
  billing_event                    String?   // IMPRESSIONS, LINK_CLICKS, APP_INSTALLS, etc.
  optimization_goal                String?   // CONVERSIONS, LINK_CLICKS, REACH, IMPRESSIONS, etc.
  optimization_sub_event           String?   // VIDEO_SOUND_ON, TRIP_CONSIDERATION, etc.
  targeting                        Json?     @db.JsonB
  targeting_optimization_types     Json?     @db.JsonB
  promoted_object                  Json?     @db.JsonB
  destination_type                 String?   // WEBSITE, APP, MESSENGER, INSTAGRAM_DIRECT, etc.
  start_time                       DateTime?
  end_time                         DateTime?
  adset_schedule                   Json?     @db.JsonB
  pacing_type                      Json?     @db.JsonB
  recurring_budget_semantics       Boolean?
  learning_stage_info              Json?     @db.JsonB
  issues_info                      Json?     @db.JsonB
  is_dynamic_creative              Boolean?
  creative_sequence                Json?     @db.JsonB  // Array of ad IDs
  attribution_spec                 Json?     @db.JsonB
  campaign_attribution             String?
  frequency_control_specs          Json?     @db.JsonB
  adlabels                         Json?     @db.JsonB
  source_adset_id                  String?
  dsa_beneficiary                  String?
  dsa_payor                        String?
  regional_regulated_categories    Json?     @db.JsonB
  regional_regulation_identities   Json?     @db.JsonB
  asset_feed_id                    String?
  rf_prediction_id                 String?
  review_feedback                  String?
  use_new_app_click                Boolean?
  created_time                     DateTime?
  updated_time                     DateTime?
  campaign_active_time             String?   // Numeric string
  synced_at                        DateTime  @default(now())
  updated_at                       DateTime  @default(now()) @updatedAt

  @@map("facebook_ads_adsets")
  @@schema("marketing")
}

// Facebook Ads Ad data
model FacebookAdsAd {
  uuid                        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  id                          String    @unique
  account_id                  String
  campaign_id                 String
  adset_id                    String
  name                        String
  status                      String?   // ACTIVE, PAUSED, DELETED, ARCHIVED
  configured_status           String?
  effective_status            String?   // ACTIVE, PAUSED, PENDING_REVIEW, DISAPPROVED, CAMPAIGN_PAUSED, ADSET_PAUSED, etc.
  creative                    Json?     @db.JsonB
  creative_asset_groups_spec  Json?     @db.JsonB
  conversion_domain           String?
  tracking_specs              Json?     @db.JsonB  // Array of tracking objects
  ad_schedule_start_time      DateTime?
  ad_schedule_end_time        DateTime?
  ad_active_time              String?   // Numeric string
  adlabels                    Json?     @db.JsonB
  ad_review_feedback          Json?     @db.JsonB  // Object with feedback
  issues_info                 Json?     @db.JsonB  // Array of issue objects
  source_ad_id                String?
  preview_shareable_link      String?
  display_sequence            Int?
  recommendations             Json?     @db.JsonB
  created_time                DateTime?
  updated_time                DateTime?
  last_updated_by_app_id      String?
  synced_at                   DateTime  @default(now())
  updated_at                  DateTime  @default(now()) @updatedAt

  @@map("facebook_ads_ads")
  @@schema("marketing")
}

// Campaign Daily Insights (No breakdown)
model FacebookAdsInsightsDaily {
  uuid                        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  campaign_id                 String
  campaign_name               String
  date                 DateTime  @db.Date 
  spend                       Decimal?  @db.Decimal(18, 2)
  impressions                 BigInt?
  clicks                      BigInt?
  reach                       BigInt?
  frequency                   Decimal?  @db.Decimal(10, 4)
  inline_link_clicks          BigInt?
  inline_link_click_ctr       Decimal?  @db.Decimal(10, 4)
  cpc                         Decimal?  @db.Decimal(18, 6)
  cpm                         Decimal?  @db.Decimal(18, 6)
  cpp                         Decimal?  @db.Decimal(18, 6)
  ctr                         Decimal?  @db.Decimal(10, 4)
  cost_per_inline_link_click  Decimal?  @db.Decimal(18, 6)
  conversions                 BigInt?
  conversion_values           Decimal?  @db.Decimal(18, 2)
  cost_per_conversion         Decimal?  @db.Decimal(18, 6)
  video_30_sec_watched_actions BigInt?
  video_p25_watched_actions   BigInt?
  video_p50_watched_actions   BigInt?
  video_p75_watched_actions   BigInt?
  video_p100_watched_actions  BigInt?
  video_avg_time_watched_actions Decimal? @db.Decimal(10, 2)
  post_engagements            BigInt?
  post_reactions              BigInt?
  post_comments               BigInt?
  post_shares                 BigInt?
  page_likes                  BigInt?
  actions                     Json?     @db.JsonB
  action_values               Json?     @db.JsonB
  conversions_by_type         Json?     @db.JsonB
  purchase                    BigInt?
  purchase_roas               Json?     @db.JsonB
  date_start                  DateTime? @db.Date
  date_stop                   DateTime? @db.Date
  updated_at                  DateTime  @default(now()) @updatedAt
  synced_at                   DateTime  @default(now())

  @@unique([campaign_id, date], name: "unique_campaign_report_date")
  @@map("facebook_ads_insights_daily")
  @@schema("marketing")
}
